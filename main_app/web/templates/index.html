{% extends "base.html" %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">Welcome to Progress Tracker! 🎉</h2>
    </div>
    <p style="margin-bottom: var(--spacing-lg); color: var(--gray-600); font-size: var(--font-lg);">Track your reading, drawing, and fitness progress all in one place with style and ease.</p>
    
    {% if not users %}
        <div class="alert alert-info">
            <span>ℹ️</span>
            <span>No users found. Create users via the API first.</span>
        </div>
    {% endif %}
</div>

<div class="two-column">
    <div>
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">📚 Recent Reading</h3>
                <a href="/web/reading" class="btn btn-outline btn-sm">View All →</a>
            </div>
            {% if recent_reading %}
                {% for entry in recent_reading %}
                <div class="entry-card">
                    <h4 class="entry-title">{{ entry.title }}</h4>
                    {% if entry.author %}<p><strong>By:</strong> {{ entry.author }}</p>{% endif %}
                    <div class="entry-meta">
                        <span class="status-badge status-{{ entry.status.value.lower() }}">{{ entry.status.value.replace('_', ' ').title() }}</span>
                        {% if entry.progress_fraction %}
                        <span>• {{ (entry.progress_fraction * 100) | round | int }}% complete</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div style="text-align: center; padding: var(--spacing-xl); color: var(--gray-500);">
                    <div style="font-size: 2rem; margin-bottom: var(--spacing-sm);">📚</div>
                    <p>No reading entries yet.</p>
                </div>
            {% endif %}
        </div>
        
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">💪 Recent Fitness</h3>
                <a href="/web/fitness" class="btn btn-outline btn-sm">View All →</a>
            </div>
            {% if recent_fitness %}
                {% for entry in recent_fitness %}
                <div class="entry-card">
                    <h4 class="entry-title">{{ entry.title }}</h4>
                    {% if entry.activity_type %}<p><strong>Type:</strong> {{ entry.activity_type | title }}</p>{% endif %}
                    <div class="entry-meta">
                        <span class="status-badge status-{{ entry.status.value.lower() }}">{{ entry.status.value.replace('_', ' ').title() }}</span>
                        {% if entry.duration_minutes %}
                        <span>• {{ entry.duration_minutes }} min</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div style="text-align: center; padding: var(--spacing-xl); color: var(--gray-500);">
                    <div style="font-size: 2rem; margin-bottom: var(--spacing-sm);">💪</div>
                    <p>No fitness entries yet.</p>
                </div>
            {% endif %}
        </div>
        
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">🚀 Quick Actions</h3>
            </div>
            <div class="three-column">
                <a href="/web/reading" class="btn btn-primary" style="text-decoration: none; text-align: center;">📚 Reading</a>
                <a href="/web/drawing" class="btn btn-primary" style="text-decoration: none; text-align: center;">🎨 Drawing</a>
                <a href="/web/fitness" class="btn btn-primary" style="text-decoration: none; text-align: center;">💪 Fitness</a>
            </div>
        </div>
    </div>
    
    <div>
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">🎨 Recent Drawing</h3>
                <a href="/web/drawing" class="btn btn-outline btn-sm">View All →</a>
            </div>
            {% if recent_drawing %}
                {% for entry in recent_drawing %}
                <div class="entry-card">
                    <h4 class="entry-title">{{ entry.title }}</h4>
                    {% if entry.subject %}<p><strong>Subject:</strong> {{ entry.subject }}</p>{% endif %}
                    <div class="entry-meta">
                        <span class="status-badge status-{{ entry.status.value.lower() }}">{{ entry.status.value.replace('_', ' ').title() }}</span>
                        {% if entry.duration_hours %}
                        <span>• {{ entry.duration_hours }}h</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div style="text-align: center; padding: var(--spacing-xl); color: var(--gray-500);">
                    <div style="font-size: 2rem; margin-bottom: var(--spacing-sm);">🎨</div>
                    <p>No drawing entries yet.</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}